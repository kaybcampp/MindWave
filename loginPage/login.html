<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindWave - Admin Login</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>
    <div class="login-container">
        <!-- Title -->
        <h1 id="form-title">Welcome</h1>
        
        <!-- Login/Create Account Form -->
        <form id="auth-form">
            <div class="input-container">
                <input type="text" id="username" required>
                <label for="username">Username</label>
            </div>
            <div class="input-container">
                <input type="password" id="password" required>
                <label for="password">Password</label>
            </div>
            <!-- Email Field for Account Creation (hidden initially) -->
            <div class="input-container" id="email-container" style="display: none;">
                <input type="email" id="email">
                <label for="email">Email</label>
            </div>
            <button type="submit" id="submit-button">Login</button>
        </form>
        
        <!-- Toggle Buttons -->
        <div class="toggle-buttons">
            <button id="toggle-create-account">Create Account</button>
            <p id="toggle-message">Donâ€™t have an account? <span id="toggle-link">Create one now</span>.</p>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const formTitle = document.getElementById("form-title");
            const submitButton = document.getElementById("submit-button");
            const emailContainer = document.getElementById("email-container");
            const toggleButton = document.getElementById("toggle-create-account");
            const toggleLink = document.getElementById("toggle-link");
            const authForm = document.getElementById("auth-form");

            let isCreatingAccount = false;

            // Hardcoded test credentials
            const testUsername = "testuser";
            const testPassword = "password123";

            function toggleForm() {
                isCreatingAccount = !isCreatingAccount;

                // Update form title and button text
                formTitle.textContent = isCreatingAccount ? "Sign Up" : "Welcome";
                submitButton.textContent = isCreatingAccount ? "Create Account" : "Login";

                // Show/hide the email field for account creation
                emailContainer.style.display = isCreatingAccount ? "block" : "none";

                // Update toggle text
                toggleButton.textContent = isCreatingAccount ? "Back to Login" : "Create Account";
                toggleLink.textContent = isCreatingAccount ? "Log in instead" : "Create one now";
            }

            // Event listeners for toggling between login and sign up
            toggleButton.addEventListener("click", toggleForm);
            toggleLink.addEventListener("click", toggleForm);

            // Function to navigate with loading delay
            function navigateTo(pageUrl) {
                sessionStorage.setItem("nextPage", pageUrl); // Store target page URL
                window.location.href = "../loadingPage/loading.html"; // Redirect to loading page
            }

            // Form submit event listener
            authForm.addEventListener("submit", (e) => {
                e.preventDefault(); // Prevent page reload

                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;

                if (isCreatingAccount) {
                    alert(`Account created successfully for ${username}!`);
                    toggleForm(); // Go back to login mode
                } else {
                    // Check against test credentials
                    if (username === testUsername && password === testPassword) {
                        // Redirect to loading page if login is successful
                        navigateTo("../homePage/home.html");
                    } else {
                        alert("Incorrect username or password. Please try again.");
                    }
                }
            });
        });
    </script>
</body>
</html>
